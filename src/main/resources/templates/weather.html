<!doctype html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>–ü–æ–≥–æ–¥–∞ –≤ –≥–æ—Ä–æ–¥–µ</title>
    <link th:href="@{/css/style.css}" rel="stylesheet">
</head>
<body>
<div class="weather-container">
    <h1>üå§Ô∏è –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã</h1>

    <form th:action="@{/weather}" method="post" class="search-form" id="weatherForm">
        <input
                type="text"
                name="city"
                th:value="${city ?: ''}"
                placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞..."
                class="city-input"
                required
        >
        <button type="submit" class="submit-btn">–£–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É</button>
    </form>

    <div class="loading" id="loading">–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ...</div>

    <div th:if="${hasError}"
         th:text="${errorMessage}"
         class="error-message show">
    </div>

    <div th:if="${weather != null && !hasError}"
         class="weather-card show">

        <div class="city-header">
            <h2 class="city-name" th:text="${city}">–ì–æ—Ä–æ–¥</h2>
            <div class="timestamp" th:text="${weather.dt}">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</div>
        </div>

        <div class="temperature">
            <span class="temp-value" th:text="${#numbers.formatInteger(weather.main.temp, 0)} + '¬∞C'"></span>
        </div>

        <div class="weather-description"
             th:text="${weather.weather[0].description}">
            –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≥–æ–¥—ã
        </div>

        <div class="weather-icon" th:switch="${weather.weather[0].main}">
            <span th:case="'Clear'">‚òÄÔ∏è</span>
            <span th:case="'Clouds'">‚òÅÔ∏è</span>
            <span th:case="'Rain'">üåßÔ∏è</span>
            <span th:case="'Snow'">‚ùÑÔ∏è</span>
            <span th:case="'Thunderstorm'">‚õàÔ∏è</span>
            <span th:case="*">üå§Ô∏è</span>
        </div>

        <div class="weather-info">
            <div class="info-item">
                <span class="info-label">–û—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫</span>
                <span class="info-value" th:text="${#numbers.formatInteger(weather.main.feels_like, 0)}+'¬∞C'"></span>
            </div>
            <div class="info-item">
                <span class="info-label">–°–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞</span>
                <span class="info-value" th:text="${weather.wind.speed}+' –º/—Å'">0 –º/—Å</span>
            </div>
            <div class="info-item">
                <span class="info-label">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è</span>
                <span class="info-value" th:text="${#numbers.formatInteger(weather.main.temp_min, 0)}+'¬∞C'"></span>
            </div>
            <div class="info-item">
                <span class="info-label">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è</span>
                <span class="info-value" th:text="${#numbers.formatInteger(weather.main.temp_max, 0)}+'¬∞C'"></span>
            </div>
        </div>

        <div class="sun-times">
            <div class="sun-item sunrise">
                <div class="sun-icon">üåÖ</div>
                <div class="sun-time" th:text="${weather.sys.sunrise}">07:49</div>
                <div class="sun-label">–í–æ—Å—Ö–æ–¥</div>
            </div>
            <div class="sun-item sunset">
                <div class="sun-icon">üåá</div>
                <div class="sun-time" th:text="${weather.sys.sunset}">16:06</div>
                <div class="sun-label">–ó–∞–∫–∞—Ç</div>
            </div>
        </div>
    </div>
</div>
<script th:src="@{/js/script.js}" defer></script>
</body>
</html>